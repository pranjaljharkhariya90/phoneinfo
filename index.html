<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Device & Budget Scanner</title>
    <style>
        :root { --primary: #2563eb; --bg: #f8fafc; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; color: #1e293b; }
        .container { background: white; width: 90%; max-width: 450px; padding: 2rem; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); text-align: center; }
        h2 { margin-top: 0; color: var(--primary); }
        .btn { background: var(--primary); color: white; border: none; padding: 14px 28px; border-radius: 12px; font-size: 1rem; font-weight: 600; cursor: pointer; width: 100%; transition: transform 0.2s; }
        .btn:active { transform: scale(0.98); }
        .results-box { margin-top: 25px; display: none; text-align: left; background: #f1f5f9; padding: 15px; border-radius: 12px; border: 1px solid #e2e8f0; }
        .row { display: flex; justify-content: space-between; margin-bottom: 12px; font-size: 0.95rem; }
        .label { color: #64748b; font-weight: 500; }
        .val { font-weight: 700; color: #0f172a; text-align: right; }
        .budget-tag { display: inline-block; padding: 5px 12px; border-radius: 6px; color: white; font-size: 0.85rem; font-weight: bold; margin-top: 5px; }
    </style>
</head>
<body>

<div class="container">
    <h2>Phone Analyzer</h2>
    <p>Click to detect your phone model and estimated market budget.</p>
    <button class="btn" onclick="scanDevice()">Analyze My Phone</button>

    <div id="results" class="results-box">
        <div class="row"><span class="label">Brand:</span> <span id="brand" class="val">Detecting...</span></div>
        <div class="row"><span class="label">Model:</span> <span id="model" class="val">Detecting...</span></div>
        <div class="row"><span class="label">Battery:</span> <span id="battery" class="val">--</span></div>
        <hr style="border: 0; border-top: 1px solid #cbd5e1; margin: 15px 0;">
        <div class="row" style="flex-direction: column; align-items: center;">
            <span class="label">Estimated Budget Range:</span>
            <div id="budget" class="budget-tag">Calculating...</div>
        </div>
    </div>
</div>

<script>
async function scanDevice() {
    document.getElementById('results').style.display = 'block';
    
    let brand = "Generic";
    let model = "Unknown Model";
    let budget = "Mid-Range";
    let color = "#3b82f6";

    // 1. ATTEMPT HIGH ENTROPY DETECTION (For Android/Chrome/Edge)
    if (navigator.userAgentData) {
        try {
            const data = await navigator.userAgentData.getHighEntropyValues(["model", "platform", "platformVersion"]);
            brand = navigator.userAgentData.brands[0].brand.replace('Not A;Brand', 'Generic');
            model = data.model || "Unknown Android";
        } catch (e) {
            console.log("Permission denied for model details.");
        }
    }

    // 2. FALLBACK & IPHONE DETECTION
    const ua = navigator.userAgent;
    if (ua.includes("iPhone")) {
        brand = "Apple";
        model = "iPhone (Specific model hidden by Apple)";
        // Logic: Most iPhones are Premium
        budget = "Premium / Flagship";
        color = "#10b981";
    }

    // 3. BUDGET LOGIC BASED ON KEYWORDS
    const lowerModel = model.toLowerCase();
    const budgetList = {
        premium: ["ultra", "pro max", "fold", "flip", "pixel 9", "pixel 8", "s24", "s23"],
        budget: ["lite", "redmi", "galaxy a1", "galaxy a0", "poco", "moto g", "f-series"]
    };

    if (budget !== "Premium / Flagship") { // If not already set as iPhone
        if (budgetList.premium.some(k => lowerModel.includes(k))) {
            budget = "Premium / Flagship";
            color = "#10b981";
        } else if (budgetList.budget.some(k => lowerModel.includes(k))) {
            budget = "Economy / Budget";
            color = "#f59e0b";
        } else {
            budget = "Standard Mid-Range";
            color = "#3b82f6";
        }
    }

    // 4. BATTERY STATUS (Fun extra info)
    if (navigator.getBattery) {
        const batt = await navigator.getBattery();
        document.getElementById('battery').innerText = `${Math.round(batt.level * 100)}% (${batt.charging ? 'Charging' : 'Discharging'})`;
    }

    // UPDATE UI
    document.getElementById('brand').innerText = brand;
    document.getElementById('model').innerText = model;
    const bTag = document.getElementById('budget');
    bTag.innerText = budget;
    bTag.style.backgroundColor = color;
}
</script>

</body>
</html>
